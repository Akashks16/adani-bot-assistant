import React, { useState } from "react";
import "./AIAssistantUI.css";
import BotAssistantApp from "./BotAssistantApp";
import Chatbot from "./Chatbot";

const AIAssistantUI = ({ pathname }) => {
  const [activeTab, setActiveTab] = useState();

  const renderTab = () => {
    switch (activeTab) {
      case "chatbot":
        return <Chatbot />;
      case "botAssistant":
        return <BotAssistantApp />;
      default:
        return (
          <div>
            {(pathname === "" || pathname === "invoice-uploader") && (
              <div
                className="message-options options-container"
                style={{ margin: "5px", cursor: "pointer", display: "flex" }}
                onClick={() => setActiveTab("chatbot")}
              >
                <svg
                  width="32"
                  height="32"
                  viewBox="0 0 32 32"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M12.1273 14.4403C12.3866 14.4493 12.6322 14.5586 12.8124 14.7452C12.9926 14.9317 13.0933 15.181 13.0933 15.4403C13.0933 15.6997 12.9926 15.949 12.8124 16.1355C12.6322 16.3221 12.3866 16.4314 12.1273 16.4403C11.8681 16.4314 11.6225 16.3221 11.4423 16.1355C11.2621 15.949 11.1614 15.6997 11.1614 15.4403C11.1614 15.181 11.2621 14.9317 11.4423 14.7452C11.6225 14.5586 11.8681 14.4493 12.1273 14.4403ZM19.8728 16.4403C20.132 16.4314 20.3776 16.3221 20.5578 16.1355C20.7381 15.949 20.8388 15.6997 20.8388 15.4403C20.8388 15.181 20.7381 14.9317 20.5578 14.7452C20.3776 14.5586 20.132 14.4493 19.8728 14.4403C19.6136 14.4493 19.368 14.5586 19.1878 14.7452C19.0076 14.9317 18.9069 15.181 18.9069 15.4403C18.9069 15.6997 19.0076 15.949 19.1878 16.1355C19.368 16.3221 19.6136 16.4314 19.8728 16.4403ZM19.3311 19.0351C18.3633 19.7395 17.1971 20.1191 16.0001 20.1191C14.803 20.1191 13.6368 19.7395 12.669 19.0351C12.5588 18.9636 12.4356 18.9147 12.3064 18.891C12.1772 18.8673 12.0446 18.8693 11.9163 18.897C11.7879 18.9247 11.6662 18.9774 11.5583 19.0522C11.4503 19.127 11.3582 19.2224 11.2872 19.3329C10.2378 21.1702 14.9846 22.213 16 22.1328C17.018 22.2128 21.7594 21.1714 20.7131 19.333C20.6421 19.2225 20.55 19.1271 20.442 19.0522C20.334 18.9774 20.2124 18.9247 20.084 18.897C19.9556 18.8693 19.823 18.8673 19.6938 18.8909C19.5646 18.9146 19.4413 18.9636 19.3311 19.0351ZM30.8409 15.1943V20.4472C30.8402 20.9554 30.638 21.4426 30.2786 21.8019C29.9193 22.1613 29.4321 22.3635 28.9239 22.3642H27.047C27.0799 22.9005 27.0031 23.4379 26.8212 23.9436C26.6394 24.4492 26.3563 24.9125 25.9893 25.305C25.6223 25.6975 25.1791 26.011 24.6868 26.2263C24.1945 26.4417 23.6634 26.5544 23.1261 26.5575H15.1915V28.9901C15.1916 29.1816 15.1367 29.369 15.0334 29.5302C14.93 29.6914 14.7826 29.8195 14.6085 29.8993C14.4345 29.9791 14.2412 30.0073 14.0517 29.9805C13.8621 29.9536 13.6842 29.8729 13.5392 29.748L9.83408 26.5575H8.87408C8.33674 26.5544 7.80568 26.4417 7.31337 26.2264C6.82107 26.011 6.37786 25.6975 6.01086 25.305C5.64386 24.9125 5.36078 24.4492 5.17892 23.9436C4.99706 23.4379 4.92025 22.9005 4.95318 22.3642H3.07618C2.56798 22.3635 2.08079 22.1613 1.72144 21.8019C1.36208 21.4426 1.15989 20.9554 1.15918 20.4472V15.1943C1.15989 14.6861 1.36208 14.1989 1.72144 13.8395C2.08079 13.4802 2.56798 13.278 3.07618 13.2773H4.95318C4.92025 12.7409 4.99706 12.2035 5.17892 11.6978C5.36078 11.1922 5.64386 10.729 6.01086 10.3365C6.37786 9.94397 6.82107 9.63045 7.31337 9.41508C7.80568 9.19972 8.33674 9.08703 8.87408 9.08391H15.0001V7.42436C14.4668 7.2363 14.0059 6.88583 13.6822 6.42221C13.3585 5.95859 13.1882 5.40516 13.1954 4.83976C13.2018 4.10444 13.4967 3.40105 14.0166 2.88101C14.5365 2.36097 15.2398 2.06585 15.9751 2.0592C16.7105 2.05254 17.419 2.33487 17.9482 2.84542C18.4774 3.35596 18.785 4.0539 18.8048 4.78898C18.8215 5.36269 18.6558 5.92691 18.3315 6.40047C18.0072 6.87403 17.541 7.23251 17.0001 7.42436V9.08391H23.1261C23.6634 9.08703 24.1945 9.19973 24.6868 9.41509C25.1791 9.63046 25.6223 9.94398 25.9893 10.3365C26.3563 10.729 26.6394 11.1922 26.8212 11.6979C27.0031 12.2035 27.0799 12.7409 27.047 13.2773H28.9239C29.4321 13.278 29.9193 13.4802 30.2786 13.8395C30.638 14.1989 30.8402 14.6861 30.8409 15.1943ZM15.1954 4.83976C15.2044 5.04915 15.2948 5.24676 15.4473 5.39053C15.5998 5.53431 15.8024 5.61291 16.0119 5.60961C16.2215 5.6063 16.4215 5.52136 16.5694 5.37284C16.7173 5.22433 16.8014 5.02397 16.8038 4.81439C16.805 4.70689 16.7847 4.60023 16.744 4.50071C16.7034 4.40119 16.6432 4.31083 16.567 4.23497C16.4908 4.15911 16.4002 4.09928 16.3005 4.05903C16.2008 4.01878 16.0941 3.99891 15.9866 4.00061C15.8791 4.0023 15.773 4.02552 15.6746 4.0689C15.5762 4.11228 15.4876 4.17493 15.4138 4.25315C15.3401 4.33138 15.2827 4.42359 15.2452 4.52434C15.2077 4.62509 15.1908 4.73234 15.1954 4.83976ZM4.95028 15.2773H3.15928V20.3642H4.95028V15.2773ZM25.047 13.0155C25.0479 12.5048 24.8462 12.0146 24.4861 11.6524C24.1259 11.2903 23.6368 11.0858 23.1261 11.0839H8.87408C8.36334 11.0858 7.87422 11.2903 7.51408 11.6524C7.15394 12.0146 6.95221 12.5048 6.95318 13.0156V22.6259C6.95222 23.1367 7.15395 23.6269 7.51409 23.989C7.87423 24.3512 8.36335 24.5557 8.87408 24.5575C9.35559 24.5999 10.4853 24.4065 10.8575 24.7997L13.1915 26.8095V25.5575C13.1914 25.4261 13.2172 25.2961 13.2674 25.1747C13.3177 25.0534 13.3913 24.9431 13.4842 24.8502C13.5771 24.7573 13.6873 24.6837 13.8087 24.6334C13.9301 24.5832 14.0601 24.5574 14.1915 24.5575H23.1261C23.6368 24.5556 24.1259 24.3511 24.4861 23.989C24.8462 23.6268 25.0479 23.1366 25.047 22.6258L25.047 13.0155ZM28.8409 15.2773H27.0499V20.3642H28.8409V15.2773Z"
                    fill="white"
                  />
                </svg>
                <div
                  className="message-content"
                  style={{
                    margin: "5px",
                    marginLeft: "10px",
                    fontWeight: "600",
                  }}
                >
                  Invoice Uploader Assistant
                </div>
              </div>
            )}

            {(pathname === "" || pathname === "payment-approval") && (
              <div
                className="message-options options-container"
                style={{ margin: "5px", cursor: "pointer", display: "flex" }}
                onClick={() => setActiveTab("botAssistant")}
              >
                <svg
                  width="32"
                  height="32"
                  viewBox="0 0 36 37"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M5.81262 23.3749L4.46529 22.7014C3.8653 22.4016 3.375 21.6074 3.375 20.9376V18.5C3.375 17.8298 3.86567 17.036 4.46529 16.7362L5.81262 16.0624V23.3749Z"
                    fill="white"
                  />
                  <path
                    d="M30.1877 23.3749L31.5354 22.7014C32.1354 22.4016 32.625 21.6074 32.625 20.9376V18.5C32.625 17.8298 32.1351 17.036 31.5354 16.7362L30.1877 16.0624V23.3749Z"
                    fill="white"
                  />
                  <path
                    d="M18 3.875C11.2688 3.875 5.81262 9.33122 5.81262 16.0624V23.3749H7.64075V16.0624C7.64075 10.3502 12.2875 5.70313 18 5.70313C23.7125 5.70313 28.3596 10.3502 28.3596 16.0624V25.8125C28.3596 28.8413 25.9044 31.2969 22.8752 31.2969H19.219V29.4688H16.7814V33.125H22.8752C26.9136 33.125 30.1877 29.8508 30.1877 25.8125L30.1877 16.0624C30.1877 9.33122 24.7304 3.875 18 3.875Z"
                    fill="white"
                  />
                  <path
                    d="M22.8752 13.0156H13.1251C11.1065 13.0156 9.46887 14.6529 9.46887 16.6719V21.5468C9.46887 24.9101 12.199 27.6406 15.5624 27.6406H20.4376C23.801 27.6406 26.5311 24.9101 26.5311 21.5468V16.6719C26.5315 14.6529 24.8939 13.0156 22.8752 13.0156ZM24.0942 21.5468C24.0942 23.5632 22.454 25.203 20.438 25.203H15.5624C13.546 25.203 11.9061 23.5632 11.9061 21.5468V16.6719C11.9061 16.0002 12.4531 15.4532 13.1248 15.4532H22.8749C23.5476 15.4532 24.0939 16.0002 24.0939 16.6719L24.0942 21.5468Z"
                    fill="white"
                  />
                  <path
                    d="M20.438 22.1563V23.3749L18.6099 23.9844H17.3905L15.5624 23.3749V22.1563H20.438Z"
                    fill="white"
                  />
                  <path
                    d="M20.1331 9.05481C20.1331 8.21314 19.1784 7.53125 18 7.53125C16.8216 7.53125 15.8673 8.21314 15.8673 9.05481C15.8673 9.66175 16.3671 10.1809 17.0859 10.4266V13.0156H18.9141V10.4259C19.6332 10.1806 20.1331 9.66102 20.1331 9.05481Z"
                    fill="white"
                  />
                  <path
                    d="M21.0471 19.4141C21.0471 19.9201 20.638 20.3281 20.1331 20.3281C19.6281 20.3281 19.219 19.9201 19.219 19.4141V18.1954C19.219 17.689 19.6281 17.2806 20.1331 17.2806C20.638 17.2806 21.0471 17.689 21.0471 18.1954V19.4141Z"
                    fill="white"
                  />
                  <path
                    d="M16.7814 19.4141C16.7814 19.9201 16.3719 20.3281 15.8673 20.3281C15.3627 20.3281 14.9532 19.9201 14.9532 19.4141V18.1954C14.9532 17.689 15.3627 17.2806 15.8673 17.2806C16.3719 17.2806 16.7814 17.689 16.7814 18.1954V19.4141Z"
                    fill="white"
                  />
                </svg>
                <div
                  className="message-content"
                  style={{
                    margin: "5px",
                    marginLeft: "10px",
                    fontWeight: "600",
                  }}
                >
                  Payment Approval Assistant
                </div>
              </div>
            )}
          </div>
        );
    }
  };

  return (
    <div className="ai-container">
      {/* Header */}
      <div className="ai-header">
        <div className="ai-logo">
          {activeTab ? (
            <span
              onClick={() => setActiveTab()}
              style={{ fontSize: "20px", cursor: "pointer" }}
            >
              ⬅
            </span>
          ) : (
            <div className="ai-icon">
              <div className="ai-icon-inner"></div>
            </div>
          )}
          <h2>Kapture AI Assistant</h2>
        </div>
        <div className="ai-status">
          <div className="ai-status-indicator"></div>
          <span>Neural Processing Active</span>
        </div>
      </div>

      {renderTab()}
    </div>
  );
};

export default AIAssistantUI;
